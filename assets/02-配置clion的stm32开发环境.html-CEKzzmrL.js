import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as t,o as n}from"./app-DlxWugZU.js";const s={};function o(l,i){return n(),e("div",null,[...i[0]||(i[0]=[t(`<blockquote><p>使用keil进行stm32开发，代码提示不如clion。为了使用clion进行开发，需要配置相关环境信息。</p></blockquote><h2 id="openocd和stm32cubemx" tabindex="-1"><a class="header-anchor" href="#openocd和stm32cubemx"><span>OpenOCD和Stm32CubeMX</span></a></h2><p>OpenOCD是一款开源工具，允许使用各种JTAG编程器通过GDB调试各种ARM设备。该工具可以在<a href="https://gnutoolchains.com/arm-eabi/openocd/" target="_blank" rel="noopener noreferrer">gnutoolchains</a>下载。</p><p>Stm32CubeMX是一款开源的STM32的IDE，可以生成STM32的工程文件。该工具可以在<a href="https://www.st.com/content/st_com/en/stm32cubemx.html" target="_blank" rel="noopener noreferrer">stm32cubemx</a>下载。</p><p>下载后，找个位置安装，将路径配置到Clion的Settings中，如下图：</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313214724.png" alt="20240313214724" tabindex="0" loading="lazy"><figcaption>20240313214724</figcaption></figure><h2 id="cmake配置" tabindex="-1"><a class="header-anchor" href="#cmake配置"><span>CMake配置</span></a></h2><p>下载<a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads" target="_blank" rel="noopener noreferrer">arm-none-eabi-gcc</a>，解压后配置到下面位置：</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313214613.png" alt="20240313214613" tabindex="0" loading="lazy"><figcaption>20240313214613</figcaption></figure><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313223442.png" alt="20240313223442" tabindex="0" loading="lazy"><figcaption>20240313223442</figcaption></figure><h2 id="创建项目" tabindex="-1"><a class="header-anchor" href="#创建项目"><span>创建项目</span></a></h2><p>创建项目的时候，选择<code>stm32cubemx</code>。</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313213131.png" alt="20240313213131" tabindex="0" loading="lazy"><figcaption>20240313213131</figcaption></figure><h3 id="选择配置" tabindex="-1"><a class="header-anchor" href="#选择配置"><span>选择配置</span></a></h3><p><code>select board config file</code>的作用是选择板子的配置信息。我买的是淘宝的极简板，这个配置一般是没有的。这里可以直接跳过。</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313214005.png" alt="20240313214005" tabindex="0" loading="lazy"><figcaption>20240313214005</figcaption></figure><p>之后会自动运行stm32cubemx，如果没有启动，可以直接外部启动，或者通过ioc文件运行。</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313221126.png" alt="20240313221126" tabindex="0" loading="lazy"><figcaption>20240313221126</figcaption></figure><h2 id="使用stm32cubemx生成项目代码" tabindex="-1"><a class="header-anchor" href="#使用stm32cubemx生成项目代码"><span>使用stm32cubemx生成项目代码</span></a></h2><p>通过clion进入，芯片可能不是我们想要的。需要点击home，选择我们的芯片。</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313221514.png" alt="20240313221514" tabindex="0" loading="lazy"><figcaption>20240313221514</figcaption></figure><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313221714.png" alt="20240313221714" tabindex="0" loading="lazy"><figcaption>20240313221714</figcaption></figure><p>可以点击星号，收藏芯片，下次可以直接点击左上角的星号找芯片。双击列表中的芯片，可以确认选中该芯片。</p><p>之后，可以配置芯片引脚类型，及标签。这里设置PB3为GPIO-Output，标签为LED。</p><p><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313222328.png" alt="20240313222328" loading="lazy"><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313232022.png" alt="20240313232022" loading="lazy"> 配置项目名称，路径，以及IDE。</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313222636.png" alt="20240313222636" tabindex="0" loading="lazy"><figcaption>20240313222636</figcaption></figure><p>生成文件配置，勾上<code>Generate peripheral initialization as a pair of’.c/.h’ files per peripheral</code>为每个外设生成一对&quot;.c/.h &quot;文件的外设初始化文件。</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313222751.png" alt="20240313222751" tabindex="0" loading="lazy"><figcaption>20240313222751</figcaption></figure><p>点击右上角生成代码。生成之后关闭stm32cubemx即可。</p><h2 id="运行项目" tabindex="-1"><a class="header-anchor" href="#运行项目"><span>运行项目</span></a></h2><p>在main.c中，找到<code>while(1)</code>，在其中添加下面两行代码，用于控制引脚电平反转</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-c"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">HAL_GPIO_TogglePin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">LED_GPIO_Port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> LED_Pin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">HAL_Delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>在运行配置中，添加<code>OpenOCD Download &amp; Run</code>，配置如下：</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313224155.png" alt="20240313224155" tabindex="0" loading="lazy"><figcaption>20240313224155</figcaption></figure><p>图中stlink.cfg文件，内容如下，可以复制到文件中，放到项目里。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [find </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">interface/stlink.cfg]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">transport</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> select</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hla_swd</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [find </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">target/stm32f1x.cfg]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adapter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> speed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行项目，效果如下：</p><figure><img src="https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/VID_20240313_232355 -small-original.gif" alt="VID_20240313_232355 -small-original" tabindex="0" loading="lazy"><figcaption>VID_20240313_232355 -small-original</figcaption></figure><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><p><a href="https://zhuanlan.zhihu.com/p/628628503" target="_blank" rel="noopener noreferrer">手把手教你用Clion进行STM32开发</a><a href="https://zhuanlan.zhihu.com/p/145801160" target="_blank" rel="noopener noreferrer">配置CLion用于STM32开发</a></p>`,40)])])}const p=a(s,[["render",o]]),h=JSON.parse('{"path":"/posts/stm32/02-%E9%85%8D%E7%BD%AEclion%E7%9A%84stm32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html","title":"配置clion的stm32开发环境","lang":"en-US","frontmatter":{"title":"配置clion的stm32开发环境","tag":["clion"],"category":"stm32","description":"使用clion进行stm开发的配置方式","date":"2024-03-12T00:00:00.000Z","author":"nikola","icon":"paw","isOriginal":true,"sticky":false,"timeline":true,"article":true,"star":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"配置clion的stm32开发环境\\",\\"image\\":[\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313214724.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313214613.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313223442.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313213131.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313214005.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313221126.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313221514.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313221714.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313222328.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313232022.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313222636.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313222751.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313224155.png\\",\\"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/VID_20240313_232355%20-small-original.gif\\"],\\"datePublished\\":\\"2024-03-12T00:00:00.000Z\\",\\"dateModified\\":\\"2025-12-07T16:02:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"nikola\\"}]}"],["meta",{"property":"og:url","content":"https://blog.nikolazh.eu.org/posts/stm32/02-%E9%85%8D%E7%BD%AEclion%E7%9A%84stm32%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html"}],["meta",{"property":"og:title","content":"配置clion的stm32开发环境"}],["meta",{"property":"og:description","content":"使用clion进行stm开发的配置方式"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/NikolaZhang/image-blog/main/2-stm32-dev-env/20240313214724.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-12-07T16:02:41.000Z"}],["meta",{"property":"article:author","content":"nikola"}],["meta",{"property":"article:tag","content":"clion"}],["meta",{"property":"article:published_time","content":"2024-03-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-07T16:02:41.000Z"}]]},"git":{"createdTime":1710344057000,"updatedTime":1765123361000,"contributors":[{"name":"我小叮当","username":"","email":"nikolazhang@163.com","commits":4}]},"readingTime":{"minutes":2.32,"words":695},"filePathRelative":"posts/stm32/02-配置clion的stm32开发环境.md"}');export{p as comp,h as data};
