import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,e as s,o as i}from"./app-DusMNI10.js";const r={};function o(c,e){return i(),t("div",null,[...e[0]||(e[0]=[s('<blockquote><p>提供音乐，以及图片生成一个图片播放的视频。</p></blockquote><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p>对video_maker的重构, 使用pygame进行图像的绘制. 并对结构进行调整, 更好的封装,继承.</p><h2 id="功能" tabindex="-1"><a class="header-anchor" href="#功能"><span>功能</span></a></h2><ul><li>[x] 实时展示音乐频谱图</li><li>[x] 音乐播放</li><li>[x] 歌词爬取</li><li>[x] 歌词及翻译展示</li><li>[x] 动态元素</li><li>[x] 背景图片</li><li>[x] 音乐频谱样式</li><li>[ ] 生成视频</li><li>[ ] 提前计算粒子轨迹数据,性能优化</li></ul><h3 id="pygame简单使用" tabindex="-1"><a class="header-anchor" href="#pygame简单使用"><span>pygame简单使用</span></a></h3><p>下述程序需要指定环境,需要在运行前指定环境参数. 建议使用test配置. 修改部分参数即可.</p><h4 id="绘制图形" tabindex="-1"><a class="header-anchor" href="#绘制图形"><span>绘制图形</span></a></h4><ol><li><p>各种图形绘制</p></li><li><p>示例程序: <a href="test/draw/draw_shape.py"><code>draw_shape.py</code></a><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/shapes1.png" alt="aaa" loading="lazy"></p></li><li><p>绘制函数图像<br> 示例程序: <a href="test/draw/draw_trace.py"><code>draw_trace.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/function.png" alt="default" loading="lazy"></p></li></ol><h4 id="清屏与不清屏" tabindex="-1"><a class="header-anchor" href="#清屏与不清屏"><span>清屏与不清屏</span></a></h4><ol><li><p>不清屏会显示历史位置<br> 示例程序: <a href="test/pygame/test.py"><code>bubble_test.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/points1.gif" alt="default" loading="lazy"></p></li><li><p>清屏只显示当前位置<br> 示例程序: <a href="test/pygame/test2.py"><code>bubble_test.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/points2.gif" alt="default" loading="lazy"></p></li></ol><h4 id="font的使用" tabindex="-1"><a class="header-anchor" href="#font的使用"><span>font的使用</span></a></h4><ol><li><p>使用透明度进行叠加<br> 示例程序: <a href="test/text/test_alpha.py"><code>test_alpha.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/font1.png" alt="default" loading="lazy"></p></li><li><p>使用字体，以及位置设定<br> 示例程序: <a href="test/text/test_font.py"><code>test_font.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/font2.png" alt="default" loading="lazy"></p></li></ol><h3 id="粒子效果" tabindex="-1"><a class="header-anchor" href="#粒子效果"><span>粒子效果</span></a></h3><h4 id="随机泡泡" tabindex="-1"><a class="header-anchor" href="#随机泡泡"><span>随机泡泡</span></a></h4><p>示例程序: <a href="test/particle/bubble_test.py"><code>bubble_test.py</code></a></p><h4 id="随机碰撞泡泡" tabindex="-1"><a class="header-anchor" href="#随机碰撞泡泡"><span>随机碰撞泡泡</span></a></h4><p>示例程序: <a href="test/particle/collision_test.py"><code>bubble_test.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/particle2.gif" alt="default" loading="lazy"></p><h4 id="下落粒子" tabindex="-1"><a class="header-anchor" href="#下落粒子"><span>下落粒子</span></a></h4><p>示例程序: <a href="test/particle/simple_test.py"><code>simple_test.py</code></a><br> 这个程序为你演示实际生成粒子, 以及粒子动画的底层逻辑.<br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/particle3.gif" alt="default" loading="lazy"></p><h4 id="烟花效果" tabindex="-1"><a class="header-anchor" href="#烟花效果"><span>烟花效果</span></a></h4><p>示例程序: <a href="test/particle/upfirework_test.py"><code>upfirework_test.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/particle4.gif" alt="default" loading="lazy"></p><p>下面的程序是对上面的简化。<br> 示例程序: <a href="test/particle/upfirework_test2.py"><code>upfirework_test2.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/firework2.gif" alt="default" loading="lazy"></p><h4 id="粒子数据预生成" tabindex="-1"><a class="header-anchor" href="#粒子数据预生成"><span>粒子数据预生成</span></a></h4><p>示例程序: <a href="test/particle/compute_test.py"><code>compute_test.py</code></a><br> 当粒子数量较多时, 实时粒子生成展示的方式会出现卡顿, 因此使用预生成粒子数据的方式。</p><p>粒子的装载方式与上述装载方式相同, 只是最后展示调用的方法不同, 实际调用<code>show_compute</code>.</p><p>通过display_context中的<code>is_compute</code>可以控制是否使用预生成方式</p><h3 id="歌词爬取" tabindex="-1"><a class="header-anchor" href="#歌词爬取"><span>歌词爬取</span></a></h3><ol><li><p>获取网易云上的歌词 示例程序: <a href="test/spider/request_music.py"><code>request_music.py</code></a><code>NetEaseRequest</code>需要歌曲id作为参数. <code>search_lyric</code>方法会返回两个集合, 一个是原始歌词, 另一个是翻译.<br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/歌词结果.png" alt="default" loading="lazy"></p></li><li><p>歌词分割，将比较长的歌词分成固定长度的，切分为多行:<br> 示例程序: <a href="test/text/test_split.py"><code>test_split.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/word_split.png" alt="default" loading="lazy"></p></li></ol><h3 id="图像处理" tabindex="-1"><a class="header-anchor" href="#图像处理"><span>图像处理</span></a></h3><h4 id="将图像对齐到指定大小" tabindex="-1"><a class="header-anchor" href="#将图像对齐到指定大小"><span>将图像对齐到指定大小</span></a></h4><p>自动将图像补充高度或者宽度，补充的内容会进行模糊化处理。</p><p>示例程序: <a href="test/image/test.py"><code>test.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/图片补充.png" alt="default" loading="lazy"></p><h3 id="音乐可视化" tabindex="-1"><a class="header-anchor" href="#音乐可视化"><span>音乐可视化</span></a></h3><h4 id="音乐频谱柱状图" tabindex="-1"><a class="header-anchor" href="#音乐频谱柱状图"><span>音乐频谱柱状图</span></a></h4><p>示例程序: <a href="test/weave/test2.py"><code>test2.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/bars.gif" alt="default" loading="lazy"></p><h4 id="音乐频谱环绕圆形" tabindex="-1"><a class="header-anchor" href="#音乐频谱环绕圆形"><span>音乐频谱环绕圆形</span></a></h4><p>示例程序: <a href="test/weave/test.py"><code>test.py</code></a><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/weave_circle.gif" alt="default" loading="lazy"></p><h2 id="main" tabindex="-1"><a class="header-anchor" href="#main"><span>main</span></a></h2><p><code>main.py</code> 是程序入口，组合了多个元素。运行截图如下：<br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/run.png" alt="default" loading="lazy"><br><img src="https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/run2.png" alt="default" loading="lazy"></p><h2 id="一些总结" tabindex="-1"><a class="header-anchor" href="#一些总结"><span>一些总结</span></a></h2><ol><li>系统自动去装载程序命令指定的环境，如果没有则更具<code>env.py</code>中的默认值加载环境参数。</li><li><code>PygameDisplay</code>可以提供一个视图，当需要展示一些动态元素的时候，使用它非常方便。</li><li>需要给<code>PygameDisplay</code>提供play_time参数，指定展示时间。</li><li><code>PygameDisplay</code>的<code>add_element</code>方法，允许添加动态元素。元素需要继承<code>BaseElement</code></li><li><code>PygameDisplay</code>的<code>show</code>方法，即可播放。</li></ol><h2 id="关于粒子数据预生成" tabindex="-1"><a class="header-anchor" href="#关于粒子数据预生成"><span>关于粒子数据预生成</span></a></h2><p>有两种方案:</p><ol><li>使用pygame动态生成方式, 但是时间序列提前生成. 代码中根据当前时间参数进行粒子数据的生成和存储.<br> 这种方式和原始动态生成有很多代码需要兼容.</li><li>使用<code>particle/compute</code>包下的代码提前生成粒子数据.</li></ol><p>动态粒子都是用<a href="particle/compute">particle/compute</a>包下的代码.<br> 最初的动态粒子使用生成时间</p><h2 id="issue" tabindex="-1"><a class="header-anchor" href="#issue"><span>issue</span></a></h2><h3 id="_1-使用sprite进行粒子轨迹计算不知为啥碰撞粒子不会碰撞了" tabindex="-1"><a class="header-anchor" href="#_1-使用sprite进行粒子轨迹计算不知为啥碰撞粒子不会碰撞了"><span>1. 使用sprite进行粒子轨迹计算不知为啥碰撞粒子不会碰撞了</span></a></h3><h3 id="_2-生成视频时长不对-而且无法录音-可以后期为mp4添加音乐" tabindex="-1"><a class="header-anchor" href="#_2-生成视频时长不对-而且无法录音-可以后期为mp4添加音乐"><span>2. 生成视频时长不对. 而且无法录音(可以后期为mp4添加音乐)</span></a></h3><h2 id="end" tabindex="-1"><a class="header-anchor" href="#end"><span>end</span></a></h2><p>\\T_T/ a gift for touhouer.</p>',51)])])}const h=a(r,[["render",o]]),l=JSON.parse('{"path":"/open_source/python-tools/music_show.html","title":"图片放映视频生成","lang":"en-US","frontmatter":{"date":"2023-11-18T00:00:00.000Z","title":"图片放映视频生成","shortTitle":"图片放映视频生成","description":"生成图片放映视频","tag":["python","音乐","视频"],"category":["开源"],"banner":"http://image.nikolazhang.top/wallhaven-nrwq11.jpg","author":"nikola","icon":"article","isOriginal":true,"sticky":false,"timeline":true,"article":true,"star":true,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"图片放映视频生成\\",\\"image\\":[\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/shapes1.png\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/function.png\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/points1.gif\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/points2.gif\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/font1.png\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/font2.png\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/particle2.gif\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/particle3.gif\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/particle4.gif\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/firework2.gif\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/歌词结果.png\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/word_split.png\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/图片补充.png\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/bars.gif\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/weave_circle.gif\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/run.png\\",\\"https://gitee.com/NikolaZhang/music_show/raw/master/resources/image/run2.png\\"],\\"datePublished\\":\\"2023-11-18T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-31T08:40:08.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"nikola\\"}]}"],["meta",{"property":"og:url","content":"https://nikolazhang.github.io/open_source/python-tools/music_show.html"}],["meta",{"property":"og:title","content":"图片放映视频生成"}],["meta",{"property":"og:description","content":"生成图片放映视频"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"http://image.nikolazhang.top/wallhaven-nrwq11.jpg"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-12-31T08:40:08.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"http://image.nikolazhang.top/wallhaven-nrwq11.jpg"}],["meta",{"name":"twitter:image:alt","content":"图片放映视频生成"}],["meta",{"property":"article:author","content":"nikola"}],["meta",{"property":"article:tag","content":"视频"}],["meta",{"property":"article:tag","content":"音乐"}],["meta",{"property":"article:tag","content":"python"}],["meta",{"property":"article:published_time","content":"2023-11-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-31T08:40:08.000Z"}]]},"git":{"createdTime":1705396400000,"updatedTime":1735634408000,"contributors":[{"name":"我小叮当","username":"","email":"nikolazhang@163.com","commits":5}]},"readingTime":{"minutes":3.56,"words":1069},"filePathRelative":"open_source/python-tools/music_show.md"}');export{h as comp,l as data};
