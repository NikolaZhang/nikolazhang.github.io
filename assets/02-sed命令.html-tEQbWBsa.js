import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as l}from"./app-DOjXGlw_.js";const n={};function h(t,i){return l(),a("div",null,[...i[0]||(i[0]=[e(`<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p><code>sed</code> 是一种流式文本编辑工具，在 Linux 系统中被广泛使用。它运行在终端中，能够对文本进行替换、删除、插入、取代等操作。</p><p>sed对文本的处理很强大，并且sed非常小，参数少，容易掌握，他的操作方式根awk有点像。sed按顺序逐行读取文件。</p><p>然后，它执行为该行指定的所有操作，并在完成请求的修改之后的内容显示出来，也可以存放到文件中。完成了一行上的所有操作之后，它读取文件的下一行，然后重复该过程直到它完成该文件。</p><p>在这里要注意一点，<code>源文件（默认地）保持不被修改</code>。sed 默认读取整个文件并对其中的每一行进行修改。说白了就是一行一行的操作。</p><h2 id="命令" tabindex="-1"><a class="header-anchor" href="#命令"><span>命令</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -n,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --quiet,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --silent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    取消自动打印模式空间</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 脚本,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --expression=脚本</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   添加“脚本”到程序的运行列表</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 脚本文件,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --file=脚本文件</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  添加“脚本文件”到程序的运行列表</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> --follow-symlinks</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    直接修改文件时跟随软链接</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -i[扩展名],</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --in-place[</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">扩展名]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    直接修改文件</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">如果指定扩展名就备份文件</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> N,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --line-length=N</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   指定“l”命令的换行期望长度</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> --posix</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  关闭所有</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GNU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 扩展</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -r,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --regexp-extended</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  在脚本中使用扩展正则表达式</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -s,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --separate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  将输入文件视为各个独立的文件而不是一个长的连续输入</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -u,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --unbuffered</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  从输入文件读取最少的数据，更频繁的刷新输出</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> --help</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     打印帮助并退出</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> --version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  输出版本信息并退出</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ∶新增，</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的后面可以接字串，而这些字串会在新的一行出现</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">目前的下一行</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">～</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ∶取代，</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的后面可以接字串，这些字串可以取代</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> n1,n2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 之间的行！</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ∶删除，因为是删除啊，所以</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 后面通常不接任何咚咚；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ∶插入，</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的后面可以接字串，而这些字串会在新的一行出现</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">目前的上一行</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ∶列印，亦即将某个选择的资料印出。通常</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 会与参数</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 一起运作～</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ∶取代，可以直接进行取代的工作哩！通常这个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的动作可以搭配正规表示法</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="案例" tabindex="-1"><a class="header-anchor" href="#案例"><span>案例</span></a></h2><p>下面的案例使用如下文本进行演示：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">old:case:bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">old1:graph:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">old2:code:shell</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">old3:print:mail</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dewy:year:text</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="替换" tabindex="-1"><a class="header-anchor" href="#替换"><span>替换</span></a></h3><ol><li><p>将文件 <code>file.txt</code> 中的 <code>old</code> 替换为 <code>new</code>。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/old/new/&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>如果需要替换所有的字符串，需要添加<code>g</code>参数：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/old/new/g&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>如果需要查看哪些行发生了变化，可以添加<code>-n</code>和<code>p</code>参数：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/old/new/gp&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>指定替换范围，如果需要替换前2到3行范围内的文本：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2,3s/old/new/gp&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>如果不同的范围需要替换不同的内容，可以参考：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2,3s/old/new1/gp;4s/old/new2/gp&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2,3行之间的old使用new1替换，第4行的old使用new2替换。<code>;</code>用于分割两个命令。</p><p>关于命令的分割，可以使用-e参数：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ne</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2,3s/old/new1/gp&#39;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ne</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  &#39;4s/old/new2/gp&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果不知道要替换的范围，但是直到开始和结束的字符串。比如从old1开始到old2之间的文本需要替换。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ne</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/^old1/,/old2/s/old/new/gp&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>使用正则替换时，特殊符号要进行转义：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/^\\(ol\\w\\{1\\}\\)/new/gp&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这里匹配ol字符后有一个字符的文本替换为new</p></li><li><p><code>&amp;</code>用于在匹配的文本后，附加文本</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/old/&amp;new/&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>上面的命令会在匹配到<code>old</code>的文本后面添加<code>new</code></p></li><li><p><code>n;</code>是next的缩写，</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/old/{n;s/old1/new1/}&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>上面的命令会在匹配到old的文本之后，将下一行的old1替换为new1</p></li><li><p>y的作用是进行字符集替换，不过替换字符和被替换字符长度要一样</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;y/old/new/&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>该命令会将所有的o替换为n，l替换为e，d替换为w。这个命令与s是不同的，需要注意。</p></li><li><p>h的作用是将找到的行，放到一个缓存区，G的作用是将缓存区中的内容放到最后一行</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/old1/h;$G&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>该命令会见匹配到old1所在的行放到缓存区，$G会将该内容放到最后一行。</p><p>行替换，用匹配old1的行，来替换匹配old2的行</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/old1/h;/old2/g&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>退出<code>q</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/old/new/g;3q&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>3q的意思为匹配到第3行退出</p></li><li><p>特殊匹配，以下文本表示符合某种规则</p></li></ol><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">匹配数字别忘了中括号外面还有一个中括号。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:alnum:] 字母数字 [a-z A-Z 0-9]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:alpha:] 字母 [a-z A-Z]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:blank:] 空格或制表键</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:cntrl:] 任何控制字符</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:digit:] 数字 [0-9]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:graph:] 任何可视字符（无空格）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:lower:] 小写 [a-z]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:print:] 非控制字符</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:punct:] 标点字符</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:space:] 空格</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:upper:] 大写 [A-Z]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[:xdigit:] 十六进制数字 [0-9 a-f A-F]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用方法如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/[[:digit:]]/xxx/gp&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>该命令将所有的数字替换为xxx</p><h3 id="删除" tabindex="-1"><a class="header-anchor" href="#删除"><span>删除</span></a></h3><ol><li><p>删除行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/old/d&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>删除文件 <code>file.txt</code> 中包含 <code>old</code> 的所有行。</p></li><li><p>删除1到3行</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;1,3d&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>删除3行之后的所有</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;3,$d&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>删除包括old1的行，或者包括old2的行，别忘了加\\</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/\\(old1\\|old2\\)/d&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>字符匹配范围删除</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/old1/,/^old3/d&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>从old1开始到old3开头的数据</p></li></ol><h2 id="插入" tabindex="-1"><a class="header-anchor" href="#插入"><span>插入</span></a></h2><ol><li><p>插入行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;3idewy yr&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在文件 <code>file.txt</code> 的第 3 行之前插入 <code>dewy yr</code>。</p></li><li><p>在匹配行后添加一行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/old/a new_line&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在文件 <code>file.txt</code> 中包含 <code>old</code> 的所有行后添加一行 <code>new_line</code>。</p></li><li><p>读取test2的内容，并将其写入到匹配行的下面</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/^old/r test2&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>将匹配的内容写入test2中</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/old/w test2&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ol><li><a href="http://linux.51yip.com/search/sed" target="_blank" rel="noopener noreferrer">51yip</a></li></ol>`,22)])])}const p=s(n,[["render",h]]),r=JSON.parse('{"path":"/posts/linux/02-sed%E5%91%BD%E4%BB%A4.html","title":"sed命令使用","lang":"en-US","frontmatter":{"isOriginal":false,"title":"sed命令使用","date":"2023-06-06T00:00:00.000Z","icon":"code","tag":["linux","命令","sed"],"category":"linux","description":"在Linux中使用sed命令","sticky":false,"timeline":true,"article":true,"star":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"sed命令使用\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-06-06T00:00:00.000Z\\",\\"dateModified\\":\\"2025-12-07T16:26:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"DewyYr、\\",\\"url\\":\\"https://nikolazhang.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://nikolazhang.github.io/posts/linux/02-sed%E5%91%BD%E4%BB%A4.html"}],["meta",{"property":"og:title","content":"sed命令使用"}],["meta",{"property":"og:description","content":"在Linux中使用sed命令"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-12-07T16:26:37.000Z"}],["meta",{"property":"article:tag","content":"sed"}],["meta",{"property":"article:tag","content":"命令"}],["meta",{"property":"article:tag","content":"linux"}],["meta",{"property":"article:published_time","content":"2023-06-06T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-07T16:26:37.000Z"}]]},"git":{"createdTime":1685888900000,"updatedTime":1765124797000,"contributors":[{"name":"nikola","username":"nikola","email":"nikolazhang@163.com","commits":3,"url":"https://github.com/nikola"},{"name":"dewy yr","username":"","email":"nikolazhang@163.com","commits":2},{"name":"我小叮当","username":"","email":"nikolazhang@163.com","commits":3}]},"readingTime":{"minutes":5.22,"words":1566},"filePathRelative":"posts/linux/02-sed命令.md"}');export{p as comp,r as data};
