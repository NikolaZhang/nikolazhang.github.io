import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,b as i,d as l,a as e,o as t}from"./app-CKGbbdi4.js";const h={};function p(k,s){return t(),n("div",null,[s[0]||(s[0]=i("blockquote",null,[i("p",null,"从今天开始微服务的搭建就正式开始了。当前推荐使用Nacos作为服务注册中心，替代已进入维护模式的Eureka。")],-1)),l("more"),s[1]||(s[1]=e(`<h2 id="nacos简介" tabindex="-1"><a class="header-anchor" href="#nacos简介"><span>Nacos简介</span></a></h2><p>Nacos是阿里开源的服务注册与发现中心，同时支持配置中心功能，提供了更强大的特性和更好的性能。相比Eureka，Nacos具有以下优势：</p><ul><li>支持CP和AP模式切换</li><li>内置配置中心功能</li><li>更丰富的监控和管理功能</li><li>更高的性能和扩展性</li><li>支持多种服务发现协议（REST、gRPC、DNS）</li></ul><h2 id="部署nacos服务端" tabindex="-1"><a class="header-anchor" href="#部署nacos服务端"><span>部署Nacos服务端</span></a></h2><h3 id="_1-下载nacos二进制包" tabindex="-1"><a class="header-anchor" href="#_1-下载nacos二进制包"><span>1. 下载Nacos二进制包</span></a></h3><p>Nacos服务端需要通过官方提供的二进制包部署，不建议作为Spring Boot应用程序直接构建。</p><p><strong>下载地址</strong>：<a href="https://github.com/alibaba/nacos/releases" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/nacos/releases</a></p><p><strong>选择版本</strong>：推荐使用最新稳定版本，例如：nacos-server-2.2.3.zip (Windows) 或 nacos-server-2.2.3.tar.gz (Linux)</p><h3 id="_2-解压并启动nacos服务" tabindex="-1"><a class="header-anchor" href="#_2-解压并启动nacos服务"><span>2. 解压并启动Nacos服务</span></a></h3><h4 id="windows环境" tabindex="-1"><a class="header-anchor" href="#windows环境"><span>Windows环境</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 解压下载的zip文件</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 进入nacos/bin目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cmd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startup.cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> standalone</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="linux-mac环境" tabindex="-1"><a class="header-anchor" href="#linux-mac环境"><span>Linux/Mac环境</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 解压下载的tar.gz文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -xzf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nacos-server-2.2.3.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 进入nacos/bin目录</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nacos/bin</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动Nacos（单机模式）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startup.sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> standalone</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-验证nacos服务" tabindex="-1"><a class="header-anchor" href="#_3-验证nacos服务"><span>3. 验证Nacos服务</span></a></h3><p>启动成功后，访问Nacos控制台：<a href="http://localhost:8848/nacos" target="_blank" rel="noopener noreferrer">http://localhost:8848/nacos</a></p><p>默认用户名/密码：nacos/nacos</p><h3 id="_4-nacos服务配置-可选" tabindex="-1"><a class="header-anchor" href="#_4-nacos服务配置-可选"><span>4. Nacos服务配置（可选）</span></a></h3><p>Nacos支持通过配置文件进行个性化设置，配置文件位于<code>nacos/conf/application.properties</code>：</p><p><strong>修改端口示例</strong>：</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-properties"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">server.port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">8848</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>使用MySQL持久化示例</strong>：</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-properties"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 数据源配置</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">spring.datasource.platform</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">mysql</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">db.num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">db.url.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">jdbc:mysql://localhost:3306/nacos?</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">characterEncoding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">utf8&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">connectTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">1000&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">socketTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">3000&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">autoReconnect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">true&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">useUnicode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">true&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">useSSL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">false&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">serverTimezone</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">UTC</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">db.user.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">root</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">db.password.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：使用MySQL持久化时，需要先创建nacos数据库，并执行<code>nacos/conf/nacos-mysql.sql</code>初始化脚本。</p><h2 id="搭建nacos集群" tabindex="-1"><a class="header-anchor" href="#搭建nacos集群"><span>搭建Nacos集群</span></a></h2><h3 id="_1-集群架构" tabindex="-1"><a class="header-anchor" href="#_1-集群架构"><span>1. 集群架构</span></a></h3><p>Nacos集群推荐使用至少3个节点，采用主从复制模式，通过Raft协议保证数据一致性。生产环境建议使用5个节点以获得更好的容错能力。</p><h3 id="_2-准备工作" tabindex="-1"><a class="header-anchor" href="#_2-准备工作"><span>2. 准备工作</span></a></h3><ol><li><p><strong>环境要求</strong>：</p><ul><li>JDK 1.8+ 或 OpenJDK 11+</li><li>Maven 3.2+（仅源码编译需要）</li><li>MySQL 5.7+（推荐使用，用于持久化配置和服务元数据）</li></ul></li><li><p><strong>下载Nacos</strong>：</p><ul><li><p>为每个节点下载相同版本的Nacos二进制包</p></li><li><p>解压到不同目录，例如：</p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-plaintext"><span class="line"><span>/opt/nacos/nacos-node1</span></span>
<span class="line"><span>/opt/nacos/nacos-node2</span></span>
<span class="line"><span>/opt/nacos/nacos-node3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><h3 id="_3-配置集群" tabindex="-1"><a class="header-anchor" href="#_3-配置集群"><span>3. 配置集群</span></a></h3><h4 id="_3-1-修改集群配置文件" tabindex="-1"><a class="header-anchor" href="#_3-1-修改集群配置文件"><span>3.1 修改集群配置文件</span></a></h4><p>在每个Nacos节点的<code>conf</code>目录下，修改<code>cluster.conf</code>文件，添加所有集群节点的信息：</p><div class="language-plaintext line-numbers-mode" data-highlighter="shiki" data-ext="plaintext" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-plaintext"><span class="line"><span># ip:port</span></span>
<span class="line"><span>192.168.1.101:8848</span></span>
<span class="line"><span>192.168.1.102:8848</span></span>
<span class="line"><span>192.168.1.103:8848</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意</strong>：确保每个节点都使用相同的<code>cluster.conf</code>配置。</p><h4 id="_3-2-配置mysql持久化" tabindex="-1"><a class="header-anchor" href="#_3-2-配置mysql持久化"><span>3.2 配置MySQL持久化</span></a></h4><p>在每个节点的<code>conf/application.properties</code>文件中，配置MySQL数据源：</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-properties"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启用MySQL数据源</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">spring.datasource.platform</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 数据库数量</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">db.num</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 数据库连接信息</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">db.url.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">jdbc:mysql://192.168.1.100:3306/nacos?</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">characterEncoding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">utf8&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">connectTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">1000&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">socketTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">3000&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">autoReconnect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">true&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">useUnicode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">true&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">useSSL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">false&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">serverTimezone</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">UTC</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">db.user.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">root</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">db.password.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-修改节点端口-可选" tabindex="-1"><a class="header-anchor" href="#_3-3-修改节点端口-可选"><span>3.3 修改节点端口（可选）</span></a></h4><p>如果在同一台机器上部署多个Nacos节点，需要修改每个节点的端口：</p><p>在<code>conf/application.properties</code>文件中修改：</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-properties"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">server.port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">8848</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">server.port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">8849</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点3</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">server.port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">8850</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-初始化数据库" tabindex="-1"><a class="header-anchor" href="#_4-初始化数据库"><span>4. 初始化数据库</span></a></h3><ol><li>在MySQL中创建名为<code>nacos</code>的数据库</li><li>执行<code>conf/nacos-mysql.sql</code>脚本初始化数据库表结构</li></ol><h3 id="_5-启动集群节点" tabindex="-1"><a class="header-anchor" href="#_5-启动集群节点"><span>5. 启动集群节点</span></a></h3><p>分别在每个节点的<code>bin</code>目录下执行启动命令：</p><h4 id="linux-mac环境-1" tabindex="-1"><a class="header-anchor" href="#linux-mac环境-1"><span>Linux/Mac环境</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点1</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/nacos/nacos-node1/bin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startup.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点2</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/nacos/nacos-node2/bin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startup.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点3</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/nacos/nacos-node3/bin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startup.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="windows环境-1" tabindex="-1"><a class="header-anchor" href="#windows环境-1"><span>Windows环境</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点1</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> D:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">acos</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">acos-node1</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">in</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cmd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startup.cmd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点2</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> D:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">acos</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">acos-node2</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">in</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cmd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startup.cmd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 节点3</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> D:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">acos</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">acos-node3</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">in</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cmd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> startup.cmd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-验证集群状态" tabindex="-1"><a class="header-anchor" href="#_6-验证集群状态"><span>6. 验证集群状态</span></a></h3><ol><li>访问任意节点的控制台：<a href="http://192.168.1.101:8848/nacos" target="_blank" rel="noopener noreferrer">http://192.168.1.101:8848/nacos</a></li><li>登录后，在左侧菜单选择&quot;集群管理&quot; -&gt; &quot;节点列表&quot;，可以看到所有节点的状态</li><li>健康的节点会显示为&quot;UP&quot;状态</li></ol><h3 id="_7-集群注意事项" tabindex="-1"><a class="header-anchor" href="#_7-集群注意事项"><span>7. 集群注意事项</span></a></h3><ol><li><strong>网络要求</strong>：确保集群节点之间网络互通，特别是需要开放端口用于Raft选举和数据同步</li><li><strong>时间同步</strong>：所有节点的系统时间必须保持同步，建议使用NTP服务</li><li><strong>持久化</strong>：生产环境必须配置MySQL持久化，避免数据丢失</li><li><strong>负载均衡</strong>：建议在Nacos集群前面部署负载均衡器（如Nginx），提供统一的访问入口</li><li><strong>备份策略</strong>：定期备份MySQL数据库，确保数据安全</li></ol><h2 id="创建nacos客户端" tabindex="-1"><a class="header-anchor" href="#创建nacos客户端"><span>创建Nacos客户端</span></a></h2><h3 id="_1-客户端pom配置" tabindex="-1"><a class="header-anchor" href="#_1-客户端pom配置"><span>1. 客户端POM配置</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xml"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">&lt;!-- 添加Nacos客户端依赖 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-客户端配置" tabindex="-1"><a class="header-anchor" href="#_2-客户端配置"><span>2. 客户端配置</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8080</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">service-provider</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    nacos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      discovery</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">peer1:8848,peer2:8849,peer3:8850</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">DEFAULT_GROUP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">public</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-客户端启动类" tabindex="-1"><a class="header-anchor" href="#_3-客户端启动类"><span>3. 客户端启动类</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">EnableDiscoveryClient</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceProviderApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ServiceProviderApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="验证nacos服务" tabindex="-1"><a class="header-anchor" href="#验证nacos服务"><span>验证Nacos服务</span></a></h2><ol><li><p><strong>访问Nacos控制台</strong>：在浏览器中输入<code>http://peer1:8848/nacos</code>，默认用户名/密码：nacos/nacos</p></li><li><p><strong>查看服务列表</strong>：进入控制台后，点击左侧菜单的&quot;服务管理&quot; -&gt; &quot;服务列表&quot;，可以看到已注册的服务</p></li><li><p><strong>查看集群节点</strong>：点击左侧菜单的&quot;集群管理&quot; -&gt; &quot;节点列表&quot;，可以看到集群中的所有节点</p></li><li><p><strong>验证服务发现</strong>：启动客户端服务后，在Nacos控制台的服务列表中可以看到该服务已成功注册</p></li></ol><h2 id="nacos与eureka的主要区别" tabindex="-1"><a class="header-anchor" href="#nacos与eureka的主要区别"><span>Nacos与Eureka的主要区别</span></a></h2><table><thead><tr><th>特性</th><th>Nacos</th><th>Eureka</th></tr></thead><tbody><tr><td>部署方式</td><td>单节点/集群</td><td>单节点/集群</td></tr><tr><td>一致性协议</td><td>Raft</td><td>AP（最终一致性）</td></tr><tr><td>配置中心</td><td>支持</td><td>不支持</td></tr><tr><td>动态配置</td><td>支持</td><td>不支持</td></tr><tr><td>服务健康检查</td><td>TCP/HTTP/MYSQL/自定义</td><td>客户端心跳</td></tr><tr><td>性能</td><td>更高</td><td>一般</td></tr><tr><td>扩展性</td><td>更好</td><td>一般</td></tr><tr><td>社区活跃度</td><td>活跃</td><td>维护模式</td></tr></tbody></table><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h2><ol><li>Nacos默认使用8848端口，确保该端口未被占用</li><li>集群部署时至少需要3个节点以保证高可用</li><li>生产环境建议使用MySQL作为持久化存储</li><li>可以通过namespace和group对服务进行逻辑隔离</li><li>Nacos支持配置中心功能，可以在同一个实例中同时使用服务注册和配置管理功能</li></ol>`,65))])}const c=a(h,[["render",p]]),o=JSON.parse('{"path":"/posts/springcloud/03-%E5%BE%AE%E6%9C%8D%E5%8A%A1Nacos%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.html","title":"微服务Nacos服务注册中心","lang":"en-US","frontmatter":{"isOriginal":true,"title":"微服务Nacos服务注册中心","update":"2024-01-01T00:00:00.000Z","icon":"code","tag":["nacos","springcloud"],"category":"技术","description":"Nacos服务注册中心的搭建","sticky":false,"timeline":true,"article":true,"star":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"微服务Nacos服务注册中心\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-07T17:47:52.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"DewyYr、\\",\\"url\\":\\"https://nikolazhang.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://nikolazhang.github.io/posts/springcloud/03-%E5%BE%AE%E6%9C%8D%E5%8A%A1Nacos%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83.html"}],["meta",{"property":"og:title","content":"微服务Nacos服务注册中心"}],["meta",{"property":"og:description","content":"Nacos服务注册中心的搭建"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-12-07T17:47:52.000Z"}],["meta",{"property":"article:tag","content":"springcloud"}],["meta",{"property":"article:tag","content":"nacos"}],["meta",{"property":"article:modified_time","content":"2025-12-07T17:47:52.000Z"}]]},"git":{"createdTime":1765040549000,"updatedTime":1765129672000,"contributors":[{"name":"我小叮当","username":"","email":"nikolazhang@163.com","commits":3}]},"readingTime":{"minutes":5.3,"words":1589},"filePathRelative":"posts/springcloud/03-微服务Nacos服务注册中心.md"}');export{c as comp,o as data};
