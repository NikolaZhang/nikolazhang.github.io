import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,e,o as t}from"./app-rFeEpHKt.js";const n={};function h(l,a){return t(),s("div",null,[...a[0]||(a[0]=[e(`<blockquote><p>开始一个新的系列谈谈关于elastic search的使用. 使用之前我们先谈一谈如何部署在服务器上部署一个elastic search应用.</p></blockquote><h2 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch"><span>elasticsearch</span></a></h2><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><p>由于我之前win上有一个elasticsearch的安装包. 因此直接将其上传到到虚拟机对应的目录下. <img src="https://tech.nikolazhang.top/2020-01-30-19-22-09.png" alt="2020-01-30-19-22-09" loading="lazy"></p><p>之后执行<code>tar -zxvf elasticsearch-7.4.2-linux-x86_64.tar.gz</code>进行解压操作.</p><figure><img src="https://tech.nikolazhang.top/2020-01-30-19-32-03.png" alt="2020-01-30-19-32-03" tabindex="0" loading="lazy"><figcaption>2020-01-30-19-32-03</figcaption></figure><p>压缩包居然不完整??? 可能是没有下载完.... 可以尝试使用wget从<a href="https://thans.cn/mirror/elasticsearch.html" target="_blank" rel="noopener noreferrer">镜像站</a>获取镜像.</p><p>执行<code>wget https://elasticsearch.thans.cn/downloads/elasticsearch/elasticsearch-7.3.2-no-jdk-linux-x86_64.tar.gz</code></p><figure><img src="https://tech.nikolazhang.top/2020-01-30-19-42-15.png" alt="2020-01-30-19-42-15" tabindex="0" loading="lazy"><figcaption>2020-01-30-19-42-15</figcaption></figure><p>重新执行<code>tar -zxvf elasticsearch-7.3.2-no-jdk-linux-x86_64.tar.gz</code><img src="https://tech.nikolazhang.top/2020-01-30-19-43-48.png" alt="2020-01-30-19-43-48" loading="lazy"> 解压成功.</p><h3 id="配置java环境变量" tabindex="-1"><a class="header-anchor" href="#配置java环境变量"><span>配置java环境变量</span></a></h3><p>将下面的内容复制到<code>/etc/profile</code>最后</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># JAVA_HOME需要修改为你的路径, 不过jdk相同路径应该是相同的</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> JAVA_HOME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">usr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">lib</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">jvm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">java-8-openjdk-amd64</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> JRE_HOME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">jre</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> CLASSPATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.:</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">lib</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">JRE_HOME</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">lib</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">JAVA_HOME</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">bin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$PATH</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行<code>source profile</code>使修改生效\`</p><h3 id="启动及验证" tabindex="-1"><a class="header-anchor" href="#启动及验证"><span>启动及验证</span></a></h3><figure><img src="https://tech.nikolazhang.top/2020-01-31-09-46-18.png" alt="2020-01-31-09-46-18" tabindex="0" loading="lazy"><figcaption>2020-01-31-09-46-18</figcaption></figure><p>首先jdk版本不匹配. 当然你可以忽略这个问题. 当然你也可以下载<code>openjdk-11-jdk</code> 重新配置环境变量, 执行<code>source /etc/profile</code></p><figure><img src="https://tech.nikolazhang.top/2020-01-31-09-57-29.png" alt="2020-01-31-09-57-29" tabindex="0" loading="lazy"><figcaption>2020-01-31-09-57-29</figcaption></figure><p>另外我们需要切换到普通用户下进行启动. <img src="https://tech.nikolazhang.top/2020-01-31-10-11-25.png" alt="2020-01-31-10-11-25" loading="lazy"> 出现这种情况直接对es目录777就完事了. <code>chmod -R 777 [安装目录]</code></p><p>之后就可以正常启动: <img src="https://tech.nikolazhang.top/2020-01-31-12-05-12.png" alt="2020-01-31-12-05-12" loading="lazy"></p><p>访问接口, 但看到如下界面, es就安装成功了. <img src="https://tech.nikolazhang.top/2020-01-31-12-05-58.png" alt="2020-01-31-12-05-58" loading="lazy"></p><p>p.s.: 显式的启动不是很友好关闭终端, 应用就直接结束了. 可以使用<code>./elasticsearch -d</code>在后台启动</p><h2 id="elasticsearch-header" tabindex="-1"><a class="header-anchor" href="#elasticsearch-header"><span>elasticsearch-header</span></a></h2><p><code>elasticsearch-header</code>提供了一种图形化操作elasticsearch的方法. 部署方法见下:</p><h3 id="安装elasticsearch-header-没有安装成功" tabindex="-1"><a class="header-anchor" href="#安装elasticsearch-header-没有安装成功"><span>安装elasticsearch-header[没有安装成功]</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git://github.com/mobz/elasticsearch-head.git</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> elasticsearch-head</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不知道为什么install很忙, 即使使用镜像也是很慢. 因此我就放弃安装这个了.</p><h2 id="kibana" tabindex="-1"><a class="header-anchor" href="#kibana"><span>kibana</span></a></h2><p>kibana和elasticsearch-head都可以操作elasticsearch.</p><p>这里推荐一个镜像下载站<code>https://www.newbe.pro/tags/Mirrors/</code> 当然elasticsearch也可以在这里找到</p><p>获取kibana: <code>wget https://mirrors.huaweicloud.com/kibana/7.3.2/kibana-7.3.2-linux-x86_64.tar.gz</code></p><p>安装很简单只需要将安装包解压即可. <code>tar -zxvf kibana-7.3.2-linux-x86_64.tar.gz</code></p><h3 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h3><p>在bin目录下执行<code>./kibana --allow-root</code></p><p>建议: <code>nohup ./kibana --allow-root &amp;</code></p><p>在浏览器中输入:<code>localhost:5601</code> 即可看到UI.</p><figure><img src="https://tech.nikolazhang.top/2020-01-31-16-55-37.png" alt="2020-01-31-16-55-37" tabindex="0" loading="lazy"><figcaption>2020-01-31-16-55-37</figcaption></figure><h3 id="配置kibana" tabindex="-1"><a class="header-anchor" href="#配置kibana"><span>配置kibana</span></a></h3><p>如果你需要自定义一些内容. 可以到 config目录下修改kibana.yml文件 <img src="https://tech.nikolazhang.top/2020-01-31-17-01-39.png" alt="2020-01-31-17-01-39" loading="lazy"></p>`,39)])])}const c=i(n,[["render",h]]),o=JSON.parse('{"path":"/posts/elasticsearch/elasticsearch%E7%B3%BB%E5%88%97_1_%E9%83%A8%E7%BD%B2.html","title":"ElasticSearch[1]部署","lang":"en-US","frontmatter":{"isOriginal":true,"title":"ElasticSearch[1]部署","tag":["ElasticSearch","部署"],"category":"ElasticSearch","description":"elasticsearch 的使用部署篇","date":"2020-01-31T00:00:00.000Z","sticky":false,"timeline":true,"article":true,"star":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ElasticSearch[1]部署\\",\\"image\\":[\\"https://tech.nikolazhang.top/2020-01-30-19-22-09.png\\",\\"https://tech.nikolazhang.top/2020-01-30-19-32-03.png\\",\\"https://tech.nikolazhang.top/2020-01-30-19-42-15.png\\",\\"https://tech.nikolazhang.top/2020-01-30-19-43-48.png\\",\\"https://tech.nikolazhang.top/2020-01-31-09-46-18.png\\",\\"https://tech.nikolazhang.top/2020-01-31-09-57-29.png\\",\\"https://tech.nikolazhang.top/2020-01-31-10-11-25.png\\",\\"https://tech.nikolazhang.top/2020-01-31-12-05-12.png\\",\\"https://tech.nikolazhang.top/2020-01-31-12-05-58.png\\",\\"https://tech.nikolazhang.top/2020-01-31-16-55-37.png\\",\\"https://tech.nikolazhang.top/2020-01-31-17-01-39.png\\"],\\"datePublished\\":\\"2020-01-31T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-31T08:40:08.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"我小叮当、\\",\\"url\\":\\"https://nikolazhang.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://nikolazhang.github.io/posts/elasticsearch/elasticsearch%E7%B3%BB%E5%88%97_1_%E9%83%A8%E7%BD%B2.html"}],["meta",{"property":"og:title","content":"ElasticSearch[1]部署"}],["meta",{"property":"og:description","content":"elasticsearch 的使用部署篇"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://tech.nikolazhang.top/2020-01-30-19-22-09.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-12-31T08:40:08.000Z"}],["meta",{"property":"article:tag","content":"部署"}],["meta",{"property":"article:tag","content":"ElasticSearch"}],["meta",{"property":"article:published_time","content":"2020-01-31T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-31T08:40:08.000Z"}]]},"git":{"createdTime":1665625617000,"updatedTime":1735634408000,"contributors":[{"name":"zhangxu","username":"zhangxu","email":"nikolazhang@163.com","commits":4,"url":"https://github.com/zhangxu"},{"name":"nikola","username":"nikola","email":"nikolazhang@163.com","commits":2,"url":"https://github.com/nikola"},{"name":"我小叮当","username":"","email":"nikolazhang@163.com","commits":1}]},"readingTime":{"minutes":2.59,"words":778},"filePathRelative":"posts/elasticsearch/elasticsearch系列[1]部署.md"}');export{c as comp,o as data};
